# The TaskMate Project

–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏, –≤–∫–ª—é—á–∞—é—â–∞—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏.

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```text
.
‚îú‚îÄ docker-compose.yml                       # –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ docker-compose.override.yml              # –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∫–∏ (–ø–æ—Ä—Ç—ã, pgadmin)
‚îú‚îÄ docker-compose.prod.yml                  # –ü—Ä–æ–¥-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã (SSL, Nginx)
‚îú‚îÄ nginx/
‚îÇ   ‚îú‚îÄ nginx.local.conf                     # Nginx –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îÇ   ‚îî‚îÄ nginx.prod.conf                      # Nginx –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞ (SSL)
‚îú‚îÄ TaskMateClient/                          # Frontend (React 19, TypeScript 5.9, Vite 7)
‚îú‚îÄ TaskMateServer/                          # Backend API (Laravel 12, PHP 8.4, FrankenPHP)
‚îî‚îÄ ...
```

---

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ (Full Guide)

–°–ª–µ–¥—É–π—Ç–µ —ç—Ç–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ **–ø–æ—à–∞–≥–æ–≤–æ**, —á—Ç–æ–±—ã —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø—Ä–æ–µ–∫—Ç —Å –Ω—É–ª—è.

### 0. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **OS**: Linux (Ubuntu Recommended) / macOS / Windows (WSL2)
- **Docker Engine** (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `snap` –≤–µ—Ä—Å–∏—é –≤ Ubuntu!)
- **Git**

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

–ü—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–¥–º–æ–¥—É–ª–∏, –ø–æ—ç—Ç–æ–º—É –∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Å —Ñ–ª–∞–≥–æ–º `--recursive`:

```bash
git clone --recursive https://github.com/xierongchuan/TaskMate.git .
# –ï—Å–ª–∏ —É–∂–µ —Å–∫–ª–æ–Ω–∏—Ä–æ–≤–∞–ª–∏ –±–µ–∑ submodule:
# git submodule update --init --recursive
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥–∞ –≤ —Ä–∞–±–æ—á–∏–π —Ñ–∞–π–ª:

```bash
cp .env.example .env
```

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** –æ—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env` –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:

```dotenv
# App URLs (–≤–∞–∂–Ω–æ –¥–ª—è Docker —Å–µ—Ç–∏)
LARAVEL_APP_URL=http://localhost:8007
VITE_API_BASE_URL=http://localhost:8007/api/v1

# Database Credentials
DB_USERNAME=postgres
DB_PASSWORD=secret
```

### 3. –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–±–æ—Ä–∫—É –∏ —Å—Ç–∞—Ä—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:

```bash
docker compose up -d --build
```

> ‚è≥ *–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –≤—Ä–µ–º—è (—Å–±–æ—Ä–∫–∞ PHP –∏ JS –æ–±—Ä–∞–∑–æ–≤).*

### 4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Backend

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—Å—Ç–∏–ª–∏—Å—å (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á–µ—Ä–µ–∑ `docker compose ps`), –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –±—ç–∫–µ–Ω–¥–∞.

**–ê) –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (Composer):**

–ï—Å–ª–∏ –ø–∞–ø–∫–∞ `vendor` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–∫–æ–¥ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, –Ω–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ .gitignore), —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏—Ö –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

```bash
docker compose exec backend_api composer install
```

**–ë) –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ –°–∏–¥–∏–Ω–≥ (–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ):**

–ù–∞–∫–∞—Ç—ã–≤–∞–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î –∏ –∑–∞–ø–æ–ª–Ω—è–µ–º –µ—ë –¥–µ–º–æ-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏:

```bash
docker compose exec backend_api php artisan migrate --force
docker compose exec backend_api php artisan db:seed-demo
```

**–í) –õ–∏–Ω–∫ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:**

–ß—Ç–æ–±—ã –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∏ —Ñ–∞–π–ª—ã –±—ã–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑ –≤–µ–±–∞:

```bash
docker compose exec backend_api php artisan storage:link
```

### 5. –ì–æ—Ç–æ–≤–æ! üèÅ

–ü—Ä–æ–µ–∫—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å–∞–º:

- **Frontend**: [http://localhost:8099](http://localhost:8099)
- **Backend API**: [http://localhost:8007](http://localhost:8007)

**–î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞ (–∏–∑ Demo Data):**

- **Admin**: `admin` / `password`
- **Manager**: `manager1` / `password`
- **Employees**: `emp1_1` / `password` (–∏ –¥—Ä—É–≥–∏–µ)

---

## üêß –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Podman (Fedora / RHEL / SELinux)

–ù–∞ Fedora, RHEL –∏ –¥—Ä—É–≥–∏—Ö –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞—Ö —Å SELinux —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Podman –≤–º–µ—Å—Ç–æ Docker. Podman —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ rootless-—Ä–µ–∂–∏–º–µ –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –¥–µ–º–æ–Ω–∞.

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ podman-compose –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å Docker CLI
sudo dnf install podman-compose podman-docker

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–π
podman --version          # >= 4.0
podman-compose --version  # >= 1.0
```

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è Podman

#### 1. –ü–æ–ª–Ω—ã–µ –∏–º–µ–Ω–∞ –æ–±—Ä–∞–∑–æ–≤ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

Podman –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Docker Hub –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –í—Å–µ –æ–±—Ä–∞–∑—ã –≤ `Dockerfile` –∏ `docker-compose.yml` –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø–æ–ª–Ω—ã–π –ø—É—Ç—å:

```dockerfile
# –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
FROM docker.io/library/node:22-alpine
FROM docker.io/dunglas/frankenphp:1-php8.4
COPY --from=docker.io/library/composer:latest /usr/bin/composer /usr/bin/composer

# –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ (–≤—ã–∑–æ–≤–µ—Ç –æ—à–∏–±–∫—É "short-name resolution enforced"):
FROM node:22-alpine
FROM dunglas/frankenphp:1-php8.4
```

–í `docker-compose.yml`:
```yaml
image: docker.io/library/postgres:18.1     # –Ω–µ –ø—Ä–æ—Å—Ç–æ postgres:18.1
image: docker.io/valkey/valkey:9.0.1        # –Ω–µ –ø—Ä–æ—Å—Ç–æ valkey/valkey:9.0.1
image: docker.io/library/nginx:latest       # –Ω–µ –ø—Ä–æ—Å—Ç–æ nginx:latest
```

#### 2. SELinux –º–µ—Ç–∫–∏ –Ω–∞ bind-–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ù–∞ —Å–∏—Å—Ç–µ–º–∞—Ö —Å SELinux –≤—Å–µ bind-mount'—ã –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å —Å—É—Ñ—Ñ–∏–∫—Å `:Z` (–ø—Ä–∏–≤–∞—Ç–Ω—ã–π) –∏–ª–∏ `:z` (–æ–±—â–∏–π):

```yaml
volumes:
    - ./TaskMateServer/:/app:z              # :z ‚Äî —Ç–æ–º —Ä–∞–∑–¥–µ–ª—è–µ—Ç—Å—è –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
    - ./valkey.conf:/etc/valkey/valkey.conf:ro,Z  # :Z ‚Äî –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
```

- `:z` ‚Äî –¥–ª—è —Ç–æ–º–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (`.env`, `storage/app/private`)
- `:Z` ‚Äî –¥–ª—è —Ç–æ–º–æ–≤, —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –¥–ª—è –æ–¥–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–∫–æ–Ω—Ñ–∏–≥–∏, —Å–∫—Ä–∏–ø—Ç—ã)

#### 3. Pods –∏ userns_mode (devcontainer)

`podman-compose` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–æ–∑–¥–∞—ë—Ç pod –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤. –≠—Ç–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç —Å `userns_mode: "keep-id"` (–Ω—É–∂–µ–Ω –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –º–∞–ø–ø–∏–Ω–≥–∞ UID –≤ rootless-—Ä–µ–∂–∏–º–µ).

–†–µ—à–µ–Ω–∏–µ ‚Äî –æ—Ç–∫–ª—é—á–∏—Ç—å pods –≤ compose-—Ñ–∞–π–ª–µ devcontainer'–∞:

```yaml
x-podman:
  in_pod: false

services:
  devcontainer:
    userns_mode: "keep-id"
    # ...
```

#### 4. –ó–∞–º–µ–Ω–∞ /dev/null –¥–ª—è SELinux

SELinux –±–ª–æ–∫–∏—Ä—É–µ—Ç –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ `/dev/null` –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∞–π–ª-–∑–∞–≥–ª—É—à–∫–∞:

```yaml
# –í–º–µ—Å—Ç–æ /dev/null:
- ./nginx/empty.sh:/docker-entrypoint.d/20-envsubst-on-templates.sh:ro,Z
```

### –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ —á–µ—Ä–µ–∑ Podman

```bash
# 1. –°–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª
cp .env.example .env
# –ó–∞–ø–æ–ª–Ω–∏—Ç—å DB_USERNAME, DB_PASSWORD –∏ –¥—Ä—É–≥–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

# 2. –°–æ–∑–¥–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
mkdir -p certbot/www certbot/conf

# 3. –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
podman compose up -d --build

# 4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è backend (–∫–∞–∫ —Å Docker)
podman compose exec backend_api composer install
podman compose exec backend_api php artisan migrate --force
podman compose exec backend_api php artisan db:seed-demo
podman compose exec backend_api php artisan storage:link
```

### –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ Podman

| –û—à–∏–±–∫–∞ | –ü—Ä–∏—á–∏–Ω–∞ | –†–µ—à–µ–Ω–∏–µ |
|--------|---------|---------|
| `short-name resolution enforced` | –û–±—Ä–∞–∑ –±–µ–∑ `docker.io/` –ø—Ä–µ—Ñ–∏–∫—Å–∞ | –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ –æ–±—Ä–∞–∑—É |
| `--userns and --pod cannot be set` | `userns_mode` + pods | –î–æ–±–∞–≤–∏—Ç—å `x-podman: in_pod: false` |
| `SELinux: permission denied` | –ù–µ—Ç –º–µ—Ç–∫–∏ –Ω–∞ bind-mount | –î–æ–±–∞–≤–∏—Ç—å `:Z` –∏–ª–∏ `:z` –∫ volume |
| `container name already in use` | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ —É–¥–∞–ª—ë–Ω | `podman compose down` –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å |

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Frontend

- **Framework**: React 19
- **Build Tool**: Vite 7
- **Language**: TypeScript 5.9
- **Styling**: Tailwind CSS 3.4
- **State**: Zustand
- **Query**: TanStack Query v5 (—Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π UX —á–µ—Ä–µ–∑ `placeholderData`)

### Backend API

- **Framework**: Laravel 12
- **Language**: PHP 8.4
- **Application Server**: FrankenPHP v1 (Caddy-based)
- **Testing**: Pest PHP 3.8 (193+ —Ç–µ—Å—Ç–æ–≤, 50%+ –ø–æ–∫—Ä—ã—Ç–∏–µ)
- **Database**: PostgreSQL 18
- **Cache**: Valkey (Redis-compatible)
- **Storage**: Local (S3-ready)

> **FrankenPHP** ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –¥–ª—è PHP, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞ Caddy. –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ª—É—á—à—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å PHP-FPM, –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É HTTP/2/HTTP/3, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π HTTPS –∏ —Å–∂–∞—Ç–∏–µ (zstd/gzip).

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Backend

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É:

- **Controllers** ‚Äî —Ç–æ–Ω–∫–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã —Å PHPDoc, –¥–µ–ª–µ–≥–∏—Ä—É—é—Ç –ª–æ–≥–∏–∫—É —Å–µ—Ä–≤–∏—Å–∞–º
- **Form Requests** ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (`StoreTaskRequest`, `UpdateTaskRequest`, `StoreUserRequest`, `UpdateUserRequest`)
- **Services** ‚Äî –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:
  - `TaskService` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á, –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
  - `TaskFilterService` ‚Äî —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á –ø–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º
  - `TaskProofService` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
  - `DashboardService` ‚Äî –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
  - `ShiftService` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–º–µ–Ω–∞–º–∏
  - `SettingsService` ‚Äî —Å–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **API Resources** ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ API
- **Custom Exceptions** ‚Äî `DuplicateTaskException`, `AccessDeniedException`
- **SoftDeletes** ‚Äî –º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –Ω–∞ User, AutoDealership, Task

### –¢–∏–ø—ã –∑–∞–¥–∞—á –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç—Ä–∏ —Ç–∏–ø–∞ –∑–∞–¥–∞—á:

1. **notification** ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –±–µ–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞
2. **completion** ‚Äî —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–º–µ—Ç–∫–∏ –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏
3. **completion_with_proof** ‚Äî —Ç—Ä–µ–±—É–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤ (–¥–æ 5 —Ñ–∞–π–ª–æ–≤, –¥–æ 200 –ú–ë)

**Workflow –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏:**

- –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –æ—Ç–º–µ—á–∞–µ—Ç –∑–∞–¥–∞—á—É –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π ‚Üí `pending_review`
- –ú–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç ‚Üí `verified` / `rejected`
- –ü—Ä–∏–≤–∞—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–º–∏ URL (60 –º–∏–Ω)
- –¢—Ä—ë—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: URL –ø–æ–¥–ø–∏—Å—å + Bearer —Ç–æ–∫–µ–Ω + –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞

---

## ‚è∞ –û—á–µ—Ä–µ–¥–∏ –∏ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (Scheduler)

–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤ –∑–∞–¥–∞—á –∏ —Ñ–æ–Ω–æ–≤—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –æ—Ç—á–µ—Ç—ã) –≤ –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ª–æ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ—á–µ—Ä–µ–¥–µ–π.

### 1. –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (Scheduler)

–†–∞–±–æ—Ç–∞–µ—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ `backend_scheduler` –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é:

- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á (`ProcessTaskGeneratorsJob`)**: –ö–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç. –°–æ–∑–¥–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –∑–∞–¥–∞—á –∏–∑ –∞–∫—Ç–∏–≤–Ω—ã—Ö –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤.
- **–ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –∑–∞–¥–∞—á–∏ (`ProcessRecurringTasksJob`)**: –ï–∂–µ—á–∞—Å–Ω–æ.
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏**: –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ `routes/console.php`.

–ú–µ—Ö–∞–Ω–∏–∑–º –∑–∞–ø—É—Å–∫–∞: –°–∫—Ä–∏–ø—Ç `sync-scheduler.sh` –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∑–∞–ø—É—Å–∫ `php artisan schedule:run` —Ä–æ–≤–Ω–æ –≤ `XX:XX:00` –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏.

### 2. –û—á–µ—Ä–µ–¥–∏ (Queues)

–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—á–µ—Ä–µ–¥–µ–π `laravel-worker` (Supervisor) –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–≤—É—Ö –∫–∞–Ω–∞–ª–æ–≤:

1. `default` ‚Äî –æ—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á, —Å–∏—Å—Ç–µ–º–Ω—ã–µ –¥–∂–æ–±—ã).
2. `notifications` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –æ—á–µ—Ä–µ–¥—å).

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Supervisor: `TaskMateServer/supervisor.conf`.

---

## ‚ú® Unified UI & –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–ü—Ä–æ–µ–∫—Ç –∞–∫—Ç–∏–≤–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ —Å–∏—Å—Ç–µ–º—É **Unified UI**, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â—É—é –µ–¥–∏–Ω—ã–π –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É **Dark Mode**.

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `components/ui`)

- `PageContainer` ‚Äî –æ–±–µ—Ä—Ç–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü —Å –æ—Ç—Å—Ç—É–ø–∞–º–∏ –∏ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ–º.
- `Card` ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞.
- `Button` / `IconButton` ‚Äî –∫–Ω–æ–ø–∫–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –∏–∫–æ–Ω–æ–∫.
- `Input` / `Select` / `Checkbox` / `Textarea` ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—è –≤–≤–æ–¥–∞.
- `Badge` ‚Äî —Å—Ç–∞—Ç—É—Å—ã –∏ –º–µ—Ç–∫–∏ (—É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ü–≤–µ—Ç–∞: success, danger, gray –∏ –¥—Ä.).
- `Pagination` ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ (–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ Tasks –∏ Users).
- `ConfirmDialog` ‚Äî –∑–∞–º–µ–Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö `window.confirm`.
- `Toast` ‚Äî –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.
- `Skeleton` / `EmptyState` / `ErrorState` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—à–∏–±–æ–∫.
- `FilterPanel` ‚Äî —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏.

### –°—Ç—Ä–∞–Ω–∏—Ü—ã, –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ Unified UI

- ‚úÖ **–ó–∞–¥–∞—á–∏** (`TasksPage`)
- ‚úÖ **–ê—Ä—Ö–∏–≤ –∑–∞–¥–∞—á** (`ArchivedTasksPage`)
- ‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –∑–∞–¥–∞—á** (`TaskGeneratorsPage`)
- ‚úÖ **–ê–≤—Ç–æ—Å–∞–ª–æ–Ω—ã** (`DealershipsPage`)
- ‚úÖ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** (`NotificationSettingsPage`)
- ‚úÖ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** (`UsersPage` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏—è)
- ‚úÖ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** (`SettingsPage` ‚Äî —á–∞—Å—Ç–∏—á–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –∏ —Ñ–∏–∫—Å—ã UX)

---

## ‚ö†Ô∏è –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (Internal)

### Backend

1. **–¢–µ—Å—Ç—ã**: –ü—Ä–∏ –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–µ—Å—Ç—ã:

   ```bash
   docker compose exec backend_api php artisan test
   ```

2. **–ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤**: –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ª–æ–≥–∏–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å, —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã –æ—Ç—Ä–∞–∂–∞—é—Ç –Ω–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.
3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –æ–±–Ω–æ–≤–ª—è—Ç—å `README.md`.

### Frontend & API

1. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ Backend –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Frontend –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π API.
2. **API-–∫–æ–Ω—Ç—Ä–∞–∫—Ç**: –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ Frontend —Å–≤–µ—Ä—è—Ç—å—Å—è —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π API –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤.
3. **UX**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `placeholderData: (prev) => prev` –≤ TanStack Query, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –º–µ—Ä—Ü–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

---

## Troubleshooting (–ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã)

### Permission denied (Storage / Queue Worker)

–ü—Ä–∞–≤–∞ –Ω–∞ `storage/` –∏ `bootstrap/cache` —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä `backend_scheduler`** –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç:
   ```bash
   chown -R www-data:www-data /app/storage
   chmod -R g+rwX /app/storage
   find /app/storage -type d -exec chmod g+s {} +   # SGID –¥–ª—è –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –≥—Ä—É–ø–ø—ã
   ```

2. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `filesystems.php`** –∑–∞–¥–∞—ë—Ç –ø—Ä–∞–≤–∞ –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤/–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π:
   ```php
   'permissions' => [
       'file' => ['public' => 0664, 'private' => 0664],
       'dir'  => ['public' => 0775, 'private' => 0775],
   ]
   ```

3. **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä** —è–≤–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `chmod(0775)` –Ω–∞ temp-–∫–∞—Ç–∞–ª–æ–≥–∏ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤, —á—Ç–æ–±—ã Queue Worker (www-data) –º–æ–≥ –ø–µ—Ä–µ–º–µ—â–∞—Ç—å —Ñ–∞–π–ª—ã –∏–∑ temp –≤ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.

**–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –≤—Å—ë —Ä–∞–≤–Ω–æ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç** ‚Äî –ø–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:

```bash
docker compose down
docker compose up -d --build
```

–≠—Ç–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç startup-–∫–æ–º–∞–Ω–¥—É scheduler, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø—Ä–∞–≤–∏—Ç –≤—Å–µ –ø—Ä–∞–≤–∞ –Ω–∞ storage.

**–î–ª—è Podman rootless:** –ù–∞ —Ö–æ—Å—Ç–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ —Ñ–∞–π–ª—ã –≤ `storage/app/private/` –±—É–¥—É—Ç –≤–∏–¥–Ω—ã –ø–æ–¥ sub-UID (–Ω–∞–ø—Ä–∏–º–µ—Ä, 524320), –∞ –Ω–µ –ø–æ–¥ –≤–∞—à–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º. –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ ‚Äî –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –æ–Ω–∏ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç www-data.

### Database connection

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `.env` —É–∫–∞–∑–∞–Ω `DB_HOST=postgres`, –∞ –Ω–µ `localhost`.

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

License: Proprietary License
Copyright: ¬© 2023-2026 [https://github.com/xierongchuan](https://github.com/xierongchuan). All rights reserved.
